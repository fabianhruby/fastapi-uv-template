# Gemini Project: fastapi-uv-template

This document provides a comprehensive overview of the `fastapi-uv-template` project, generated by Gemini to serve as a detailed instructional context for future interactions.

## Project Overview

This is a production-ready template for building high-performance APIs with FastAPI. It leverages `uv` for dependency management and `ruff` for linting and formatting, both from Astral. The project is containerized using Docker and includes a structured logging system, insightful middleware for request/response logging, pre-configured health check endpoints, and CORS middleware.

The architecture is split into two main components: `src/app` for application-specific logic and `src/core` for reusable, boilerplate code. This separation of concerns promotes a clean and scalable project structure.

### Key Technologies

*   **Python Version:** 3.12 or higher
*   **Framework:** FastAPI
*   **Dependency Management:** uv
*   **Linting/Formatting:** ruff
*   **Testing:** pytest, httpx
*   **Containerization:** Docker

## Building and Running

The project uses a `Makefile` to streamline common development tasks.

*   **Start the application:**
    ```sh
    make start
    ```
    This command builds and runs the Docker container. The application will be available at `http://localhost:8000`.

*   **Build the Docker container:**
    ```sh
    make build
    ```

*   **Run the Docker container:**
    ```sh
    make run
    ```

*   **Run tests:**
    ```sh
    make test
    ```

*   **Health Check Endpoints:**
    *   `http://localhost:8000/health`
    *   `http://localhost:8000/live`

## Development Conventions

### Code Quality

The project enforces code quality through `ruff` and `ty`.

*   **Run `ruff` checks:**
    ```sh
    make check-ruff
    ```

*   **Run `ty` checks:**
    ```sh
    make check-ty
    ```

*   **Run all checks:**
    ```sh
    make check-all
    ```

### Testing

The project uses `pytest` for testing.

*   **Run tests:**
    ```sh
    make test
    ```
    Tests are located in the `tests/` directory.

### CORS

Cross-Origin Resource Sharing (CORS) is configured via the `allowed_origins` setting in `src/app/config.py`. You can set this in your `.env` file as a comma-separated list of allowed origins.

**Example `.env` configuration:**
```sh
allowed_origins=http://localhost:3000,https://my-frontend.com
```

### Project Structure

*   `src/app/`: Contains the application's custom logic.
    *   `api/`: API endpoints (routers).
    *   `data/`: Pydantic models and schemas.
    *   `services/`: Business logic.
    *   `interfaces/`: Interfaces to external services.
    *   `config.py`: Application-specific configuration.
    *   `main.py`: Main application entry point.
*   `src/core/`: Contains reusable, core boilerplate code.
    *   `app.py`: FastAPI app creation.
    *   `logging.py`: Logging configuration.
    *   `middleware/`: Core middleware.
    *   `routers/`: Core routers, including health checks.

### Extending the API

To add a new endpoint, create a new router in `src/app/api/` and include it in `src/app/main.py` using `app.include_router()`.
